@model JiraTicketingToolViewModel

<div>
    <label for="description-dropdown">Initiatives:</label>
    @Html.DropDownListFor(m => m.SelectedDescription, Model.DescriptionSelectList, "Initiatives", new { @class = "js-select2" })
</div>

<div>
    <label for="project-dropdown">Project List:</label>
    @Html.DropDownListFor(m => m.SelectedProject, Model.ProjectSelectList, "ProjectList", new { @class = "js-select2" })
</div>

<button type="button" id="reset-btn" class="btn btn-primary">Reset</button>

@section scripts {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />

    <script>
        $(function () {
            // Initialize Select2 dropdowns
            $('.js-select2').select2();

            // Handle reset button click
            $('#reset-btn').on('click', function () {
                $('.js-select2').val(null).trigger('change');
            });

            // Handle description dropdown change event
            $('#SelectedDescription').on('change', function () {
                var description = $(this).val();
                if (description) {
                    $.ajax({
                        url: '@Url.Action("GetProjects", "JiraTicketingTool")',
                        data: { description: description },
                        type: 'GET',
                        dataType: 'json',
                        success: function (data) {
                            var projectDropdown = $('#SelectedProject');
                            projectDropdown.empty();
                            projectDropdown.append($('<option>').text('ProjectList').attr('value', ''));
                            $.each(data, function (index, item) {
                                projectDropdown.append($('<option>').text(item.text).attr('value', item.value));
                            });
                            projectDropdown.trigger('change');
                        }
                    });
                }
                else {
                    var projectDropdown = $('#SelectedProject');
                    projectDropdown.empty();
                    projectDropdown.append($('<option>').text('ProjectList').attr('value', ''));
                    projectDropdown.trigger('change');
                }
            });
        });
    </script>
}
